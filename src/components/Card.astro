---
interface Props {
	href: string;
	title: string;
	sector?: string;
	year?: number;
	tags?: string[];
	variant?: 'default' | 'featured';
	class?: string;
	dataCategory?: string;
	cover?: string;
}

const { href, title, sector, year, tags = [], variant = 'default', class: className = '', dataCategory, cover } = Astro.props;
const cardId = `card-${Math.random().toString(36).substr(2, 9)}`;
const isFeatured = variant === 'featured';
---

<a 
	href={href} 
	id={cardId}
	class={`card-link card-${variant} reveal ${className}`}
	data-case-card="true"
	data-category={dataCategory}
>
	{cover && (
		<div class="card-cover">
			<img src={cover} alt={title} loading="lazy" decoding="async" />
		</div>
	)}
	<h3 class="card-title">
		{title}
	</h3>
	<div class="card-meta">
		{sector && <span class="font-medium">{sector}</span>}
		{year && <span class="card-separator">â€¢</span>}
		{year && <span>{year}</span>}
	</div>
	{tags.length > 0 && (
		<div class="card-tags">
			{tags.map(tag => (
				<span class="card-tag">{tag}</span>
			))}
		</div>
	)}
</a>

<style>
	.card-link {
		display: block;
		border: 1px solid rgb(var(--border) / 0.15);
		background: rgb(var(--surface));
		padding: var(--space-6) var(--space-8);
		transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
		text-decoration: none;
		box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.03);
		border-radius: var(--radius-md);
		overflow: hidden;
	}
	.card-cover {
		margin: calc(-1 * var(--space-6)) calc(-1 * var(--space-8)) var(--space-6);
		aspect-ratio: 16 / 10;
		overflow: hidden;
		border-radius: var(--radius-md) var(--radius-md) 0 0;
		background: rgb(var(--border) / 0.1);
	}
	.card-cover img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 400ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms ease;
		opacity: 1;
	}
	.card-link:hover .card-cover img {
		transform: scale(1.02);
		opacity: 0.9;
	}
	.card-link:focus-visible .card-cover {
		outline: 2px solid rgb(var(--accent));
		outline-offset: -2px;
	}
	.card-link:hover {
		border-color: rgb(var(--accent) / 0.35);
		box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -1px rgb(0 0 0 / 0.03);
		background: rgb(var(--accent) / 0.04);
		transform: translateY(-2px);
	}
	.card-link:focus-visible {
		outline: 2px solid rgb(var(--accent));
		outline-offset: 3px;
	}
	.card-featured {
		border-left: 3px solid rgb(var(--accent));
	}
	.card-title {
		font-size: var(--text-xl);
		font-weight: var(--font-weight-semibold);
		color: rgb(var(--ink));
		letter-spacing: var(--letter-spacing-tight);
		margin-bottom: var(--space-3);
		transition: color var(--transition-base);
		position: relative;
		display: inline-block;
	}
	.card-title::after {
		content: '';
		position: absolute;
		left: 0;
		bottom: -2px;
		width: 100%;
		height: 1px;
		background-color: rgb(var(--accent));
		transform: scaleX(0);
		transform-origin: bottom right;
		transition: transform var(--transition-base);
	}
	.card-link:hover .card-title::after {
		transform: scaleX(1);
		transform-origin: bottom left;
	}
	.card-meta {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: var(--space-2);
		font-size: var(--text-sm);
		color: rgb(var(--muted));
		margin-bottom: var(--space-4);
	}
	.card-separator {
		color: rgb(var(--border) / 0.3);
	}
	.card-tags {
		display: flex;
		flex-wrap: wrap;
		gap: var(--space-2);
		padding-top: var(--space-4);
		border-top: 1px solid rgb(var(--border) / 0.1);
	}
	.card-tag {
		font-size: var(--text-xs);
		font-weight: var(--font-weight-medium);
		padding: var(--space-1) var(--space-3);
		background: rgb(var(--border) / 0.1);
		color: rgb(var(--muted));
		border-radius: var(--radius-sm);
	}
</style>



